(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e){var n=e.baseUrl,r=e.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=n,this._headers=r}var n,r;return n=t,(r=[{key:"_processResponse",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"_get",value:function(e){return fetch("".concat(this._baseUrl).concat(e),{headers:this._headers}).then(this._processResponse)}},{key:"_getUserInfo",value:function(){return this._get("/users/me")}},{key:"_getInitialCards",value:function(){return this._get("/cards")}},{key:"getInitialData",value:function(){return Promise.all([this._getUserInfo(),this._getInitialCards()])}},{key:"updateUserInfo",value:function(e){var t=e.name,n=e.description;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:n})}).then(this._processResponse)}},{key:"addCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(this._processResponse)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._processResponse)}},{key:"likeCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:"PUT",headers:this._headers}).then(this._processResponse)}},{key:"removeLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then(this._processResponse)}},{key:"updateAvatar",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._processResponse)}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){var r,o,i=this,a=t.data,u=t.handleCardClick,c=t.handleLikeClick,l=t.handleDeleteClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o=function(){i._element.remove(),i._element=null},(r="remove")in this?Object.defineProperty(this,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):this[r]=o,this._cardData=a,this._templateSelector=n,this._handleCardClick=u,this._handleLikeClick=c,this._handleDeleteClick=l}var t,r;return t=e,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".gallery__item").cloneNode(!0)}},{key:"_setEventListeners",value:function(){var e=this;this._imageElement.addEventListener("click",(function(){return e._handleCardClick(e)})),this._element.querySelector(".button_type_like").addEventListener("click",(function(){return e._handleLikeClick(e)})),null!==this._deleteButton&&this._deleteButton.addEventListener("click",(function(){return e._handleDeleteClick(e)}))}},{key:"getName",value:function(){return this._cardData.name}},{key:"getLink",value:function(){return this._cardData.link}},{key:"getId",value:function(){return this._cardData._id}},{key:"isLiked",value:function(){var e=this;return this._cardData.likes.some((function(t){return t._id===e._cardData.currentUserId}))}},{key:"updateLikes",value:function(e){this._cardData.likes=e.likes,this._processLikes()}},{key:"_processLikes",value:function(){this.isLiked()?this._likeButton.classList.add("button_type_like-active"):this._likeButton.classList.remove("button_type_like-active"),this._likeCounter.textContent=this._cardData.likes.length}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._imageElement=this._element.querySelector(".gallery__image"),this._deleteButton=this._element.querySelector(".button_type_trash"),this._likeButton=this._element.querySelector(".button_type_like"),this._likeCounter=this._element.querySelector(".gallery__like-counter"),this._cardData.owner._id!==this._cardData.currentUserId&&this._deleteButton.remove(),this._processLikes(),this._setEventListeners(),this._element.querySelector(".gallery__title").textContent=this.getName(),this._imageElement.alt=this.getName(),this._imageElement.src=this.getLink(),this._element}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"_disableSubmitButton",(function(){var e=r._params.inactiveButtonClass;r._submitButton.classList.add(e),r._submitButton.setAttribute("disabled",!0)})),i(this,"_enableSubmitButton",(function(){var e=r._params.inactiveButtonClass;r._submitButton.classList.remove(e),r._submitButton.removeAttribute("disabled")})),this._form=n,this._params=t,this._inputs=Array.from(n.querySelectorAll(t.inputSelector)),this._submitButton=n.querySelector(t.submitButtonSelector)}var t,n;return t=e,(n=[{key:"_hasInvalidInput",value:function(){return this._inputs.some((function(e){return!e.validity.valid}))}},{key:"_toggleSubmitButton",value:function(){this._hasInvalidInput()?this._disableSubmitButton():this._enableSubmitButton()}},{key:"_getErrorElement",value:function(e){return this._form.querySelector(".".concat(e.name,"-input-error"))}},{key:"_showInputError",value:function(e){var t=this._params,n=t.inputErrorClass,r=t.errorClass,o=this._getErrorElement(e);e.classList.add(n),o.textContent=e.validationMessage,o.classList.add(r)}},{key:"_hideInputError",value:function(e){var t=this._params,n=t.inputErrorClass,r=t.errorClass,o=this._getErrorElement(e);e.classList.remove(n),o.classList.remove(r),o.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_setEventListeners",value:function(){var e=this;this._inputs.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleSubmitButton()}))}))}},{key:"resetValidation",value:function(){var e=this;this._inputs.forEach((function(t){return e._hideInputError(t)})),this._toggleSubmitButton()}},{key:"enableValidation",value:function(){this._form.addEventListener("submit",(function(e){return e.preventDefault()})),this._setEventListeners()}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"_handleEscClose",(function(e){"Escape"===e.key&&n.close()})),c(this,"_handleClose",(function(e){(e.target===e.currentTarget||e.target.classList.contains("button_type_close"))&&n.close()})),this._element=document.querySelector(t)}var t,n;return t=e,(n=[{key:"setEventListeners",value:function(){this._element.addEventListener("click",this._handleClose)}},{key:"open",value:function(){this._element.classList.add("popup_opened"),document.addEventListener("keyup",this._handleEscClose)}},{key:"close",value:function(){this._element.classList.remove("popup_opened"),document.removeEventListener("keyup",this._handleEscClose)}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=y(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},p.apply(this,arguments)}function y(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function d(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(r);if(o){var n=_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._image=t._element.querySelector(".preview__image"),t._title=t._element.querySelector(".preview__title"),t}return t=a,(n=[{key:"open",value:function(e){var t=e.getName();this._title.textContent=t,this._image.alt=t,this._image.src=e.getLink(),p(_(a.prototype),"open",this).call(this)}}])&&f(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(){return w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=j(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},w.apply(this,arguments)}function j(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}function S(e,t){return S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},S(e,t)}function E(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=P(r);if(o){var n=P(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return E(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._submit=t,n._form=n._element.querySelector(".popup__form"),n._inputs=Array.from(n._form.querySelectorAll(".popup__input")),n._submitButton=n._element.querySelector(".button_type_save"),n._submitButtonCaption=n._submitButton.textContent,n}return t=a,(n=[{key:"_getInputValues",value:function(){return this._inputs.reduce((function(e,t){var n=t.name,r=t.value;return g(g({},e),{},k({},n,r))}),{})}},{key:"renderLoading",value:function(e){this._submitButton.textContent=e?"Сохранение...":this._submitButtonCaption}},{key:"setEventListeners",value:function(){var e=this;w(P(a.prototype),"setEventListeners",this).call(this),this._element.addEventListener("submit",(function(t){t.preventDefault(),e._submit(e._getInputValues())}))}},{key:"close",value:function(){w(P(a.prototype),"close",this).call(this),this._form.reset()}}])&&O(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l);function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(){return D="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=R(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},D.apply(this,arguments)}function R(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}function q(e,t){return q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},q(e,t)}function T(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}var U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=A(r);if(o){var n=A(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return T(this,e)});function a(){return I(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"setAction",value:function(e){this._action=e}},{key:"setEventListeners",value:function(){var e=this;D(A(a.prototype),"setEventListeners",this).call(this),this._element.addEventListener("submit",(function(t){t.preventDefault(),e._action()}))}}])&&B(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(l);function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var V=function(){function e(t){var n=t.nameSelector,r=t.descriptionSelector,o=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._id=null,this._name=document.querySelector(n),this._description=document.querySelector(r),this._avatar=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,description:this._description.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about,r=e.avatar,o=e._id;this._id=o,this._name.textContent=t,this._description.textContent=n,this._avatar.style.backgroundImage="url(".concat(r,")")}}])&&x(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var J=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=n,this._container=document.querySelector(t)}var t,n;return t=e,n=[{key:"addItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t?this._container.prepend(e):this._container.append(e)}},{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){t._renderer(e)}))}}],n&&N(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),H=document.forms.addCard,M=document.forms.userProfile,z=document.forms.loadAvatar,$=M.querySelector(".popup__input_property_name"),F=M.querySelector(".popup__input_property_description"),G=document.querySelector(".button_type_edit"),K=document.querySelector(".button_type_add"),Q=document.querySelector(".profile__avatar"),W=function(e){console.log(e)};function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){ee(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var te,ne,re,oe=new t({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-41",headers:{authorization:"4e0acfe9-d71b-4358-91af-c8fd963442f5","Content-Type":"application/json"}}),ie={};ne=(te={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".button",inactiveButtonClass:"button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"}).formSelector,re=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(te,["formSelector"]),Array.from(document.querySelectorAll(ne)).forEach((function(e){var t=new a(re,e);t.enableValidation(),ie[e.getAttribute("name")]=t}));var ae=new V({nameSelector:".profile__title",descriptionSelector:".profile__description",avatarSelector:".profile__avatar"}),ue=new b(".popup_type_preview"),ce=new U(".popup_type_confirm"),le=function(e){var t=new r({data:Z({currentUserId:ae._id},e),handleCardClick:function(){ue.open(t)},handleLikeClick:function(e){(e.isLiked()?oe.removeLike(e.getId()):oe.likeCard(e.getId())).then((function(t){e.updateLikes(t)})).catch(W)},handleDeleteClick:function(e){ce.open(),ce.setAction((function(){oe.deleteCard(e.getId()).then((function(){e.remove(),ce.close()})).catch(W)}))}},"#gallery-item-template");return t.generateCard()},se=new J(".gallery",(function(e){var t=le(e);se.addItem(t,!1)}));oe.getInitialData().then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];ae.setUserInfo(o),se.renderItems(i)})).catch(W);var fe=new C(".popup_type_add-card",(function(e){fe.renderLoading(!0),oe.addCard(e).then((function(e){var t=le(e);se.addItem(t),fe.close()})).catch(W).finally((function(){fe.renderLoading(!1)}))})),pe=new C(".popup_type_edit-profile",(function(e){pe.renderLoading(!0),oe.updateUserInfo(e).then((function(e){ae.setUserInfo(e),pe.close()})).catch(W).finally((function(){pe.renderLoading(!1)}))})),ye=new C(".popup_type_avatar",(function(e){ye.renderLoading(!0),oe.updateAvatar(e).then((function(e){ae.setUserInfo(e),ye.close()})).catch(W).finally((function(){ye.renderLoading(!1)}))}));[ue,fe,pe,ce,ye].forEach((function(e){return e.setEventListeners()})),Q.addEventListener("click",(function(){ie[z.getAttribute("name")].resetValidation(),ye.open()})),K.addEventListener("click",(function(){ie[H.getAttribute("name")].resetValidation(),fe.open()})),G.addEventListener("click",(function(){var e=ae.getUserInfo(),t=e.name,n=e.description;$.value=t,F.value=n,ie[M.getAttribute("name")].resetValidation(),pe.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WWxHLFdBRWIrRSxNQUFNekIsR0FDTnlDLFNBQVEsV0FDUEcsR0FBWUosZUFBYyxTQUdoQyxDQUFDMUIsR0FBY3dCLEdBQVdJLEdBQWMzQixHQUFjNkIsSUFBYXpHLFNBQVEsU0FBQzJHLEdBQUQsT0FDekVBLEVBQU1DLHVCQVdSaEQsRUFBYS9HLGlCQUFpQixTQUFTLFdBQ3JDd0gsR0FBZWYsRUFBV2tCLGFBQWEsU0FBU3FDLGtCQUNoREosR0FBWXpCLFVBRWRyQixFQUFjOUcsaUJBQWlCLFNBQVMsV0FDdEN3SCxHQUFlcEIsRUFBWXVCLGFBQWEsU0FBU3FDLGtCQUNqRFYsR0FBVW5CLFVBRVp0QixFQUFrQjdHLGlCQUFpQixTQWhCZCxXQUNuQixNQUE4QjRILEdBQVNxQyxjQUEvQjNMLEVBQVIsRUFBUUEsS0FBTUMsRUFBZCxFQUFjQSxZQUNkb0ksRUFBVWhDLE1BQVFyRyxFQUNsQnNJLEVBQWlCakMsTUFBUXBHLEVBQ3pCaUosR0FBZWpCLEVBQWdCb0IsYUFBYSxTQUFTcUMsa0JBQ3JETixHQUFhdkIsVyIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aFN1Ym1pdC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvaGVscGVycy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XG4gIH1cblxuICBfcHJvY2Vzc1Jlc3BvbnNlKHJlcykge1xuICAgIGlmIChyZXMub2spIHtcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICB9XG5cbiAgX2dldChwYXRoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9JHtwYXRofWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9wcm9jZXNzUmVzcG9uc2UpO1xuICB9XG5cbiAgX2dldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB0aGlzLl9nZXQoJy91c2Vycy9tZScpO1xuICB9XG5cbiAgX2dldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gdGhpcy5fZ2V0KCcvY2FyZHMnKTtcbiAgfVxuXG4gIGdldEluaXRpYWxEYXRhKCkge1xuICAgIHJldHVybiBQcm9taXNlLmFsbChbdGhpcy5fZ2V0VXNlckluZm8oKSwgdGhpcy5fZ2V0SW5pdGlhbENhcmRzKCldKTtcbiAgfVxuXG4gIHVwZGF0ZVVzZXJJbmZvKHsgbmFtZSwgZGVzY3JpcHRpb24gfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGFib3V0OiBkZXNjcmlwdGlvbixcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4odGhpcy5fcHJvY2Vzc1Jlc3BvbnNlKTtcbiAgfVxuXG4gIGFkZENhcmQoY2FyZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGNhcmQpLFxuICAgIH0pLnRoZW4odGhpcy5fcHJvY2Vzc1Jlc3BvbnNlKTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pLnRoZW4odGhpcy5fcHJvY2Vzc1Jlc3BvbnNlKTtcbiAgfVxuXG4gIGxpa2VDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX3Byb2Nlc3NSZXNwb25zZSk7XG4gIH1cblxuICByZW1vdmVMaWtlKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuX3Byb2Nlc3NSZXNwb25zZSk7XG4gIH1cblxuICB1cGRhdGVBdmF0YXIoZGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgfSkudGhlbih0aGlzLl9wcm9jZXNzUmVzcG9uc2UpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVMaWtlQ2xpY2ssIGhhbmRsZURlbGV0ZUNsaWNrIH0sIHRlbXBsYXRlU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9jYXJkRGF0YSA9IGRhdGE7XG4gICAgdGhpcy5fdGVtcGxhdGVTZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7XG5cbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrID0gaGFuZGxlRGVsZXRlQ2xpY2s7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcignLmdhbGxlcnlfX2l0ZW0nKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcykpO1xuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uX3R5cGVfbGlrZScpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sodGhpcykpO1xuXG4gICAgaWYgKHRoaXMuX2RlbGV0ZUJ1dHRvbiAhPT0gbnVsbCkge1xuICAgICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sodGhpcykpO1xuICAgIH1cbiAgfVxuXG4gIGdldE5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NhcmREYXRhLm5hbWU7XG4gIH1cblxuICBnZXRMaW5rKCkge1xuICAgIHJldHVybiB0aGlzLl9jYXJkRGF0YS5saW5rO1xuICB9XG5cbiAgZ2V0SWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NhcmREYXRhLl9pZDtcbiAgfVxuXG4gIHJlbW92ZSA9ICgpID0+IHtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICB9O1xuXG4gIGlzTGlrZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NhcmREYXRhLmxpa2VzLnNvbWUoKHVzZXIpID0+IHVzZXIuX2lkID09PSB0aGlzLl9jYXJkRGF0YS5jdXJyZW50VXNlcklkKTtcbiAgfVxuXG4gIHVwZGF0ZUxpa2VzKGRhdGEpIHtcbiAgICB0aGlzLl9jYXJkRGF0YS5saWtlcyA9IGRhdGEubGlrZXM7XG4gICAgdGhpcy5fcHJvY2Vzc0xpa2VzKCk7XG4gIH1cblxuICBfcHJvY2Vzc0xpa2VzKCkge1xuICAgIGlmICh0aGlzLmlzTGlrZWQoKSkge1xuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdidXR0b25fdHlwZV9saWtlLWFjdGl2ZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2J1dHRvbl90eXBlX2xpa2UtYWN0aXZlJyk7XG4gICAgfVxuICAgIHRoaXMuX2xpa2VDb3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5fY2FyZERhdGEubGlrZXMubGVuZ3RoO1xuICB9XG5cbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2ltYWdlRWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmdhbGxlcnlfX2ltYWdlJyk7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uX3R5cGVfdHJhc2gnKTtcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uX3R5cGVfbGlrZScpO1xuICAgIHRoaXMuX2xpa2VDb3VudGVyID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FsbGVyeV9fbGlrZS1jb3VudGVyJyk7XG5cbiAgICBpZiAodGhpcy5fY2FyZERhdGEub3duZXIuX2lkICE9PSB0aGlzLl9jYXJkRGF0YS5jdXJyZW50VXNlcklkKSB7XG4gICAgICB0aGlzLl9kZWxldGVCdXR0b24ucmVtb3ZlKCk7XG4gICAgfVxuICAgIHRoaXMuX3Byb2Nlc3NMaWtlcygpO1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYWxsZXJ5X190aXRsZScpLnRleHRDb250ZW50ID0gdGhpcy5nZXROYW1lKCk7XG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LmFsdCA9IHRoaXMuZ2V0TmFtZSgpO1xuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5zcmMgPSB0aGlzLmdldExpbmsoKTtcblxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IocGFyYW1zLCBmb3JtKSB7XG4gICAgdGhpcy5fZm9ybSA9IGZvcm07XG4gICAgdGhpcy5fcGFyYW1zID0gcGFyYW1zO1xuXG4gICAgdGhpcy5faW5wdXRzID0gQXJyYXkuZnJvbShmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwocGFyYW1zLmlucHV0U2VsZWN0b3IpKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSBmb3JtLnF1ZXJ5U2VsZWN0b3IocGFyYW1zLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0cy5zb21lKChpbnB1dCkgPT4gIWlucHV0LnZhbGlkaXR5LnZhbGlkKTtcbiAgfVxuXG4gIF9kaXNhYmxlU3VibWl0QnV0dG9uID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgaW5hY3RpdmVCdXR0b25DbGFzcyB9ID0gdGhpcy5fcGFyYW1zO1xuXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQoaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgfTtcblxuICBfZW5hYmxlU3VibWl0QnV0dG9uID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgaW5hY3RpdmVCdXR0b25DbGFzcyB9ID0gdGhpcy5fcGFyYW1zO1xuXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgfTtcblxuICBfdG9nZ2xlU3VibWl0QnV0dG9uKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5fZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9lbmFibGVTdWJtaXRCdXR0b24oKTtcbiAgICB9XG4gIH1cblxuICBfZ2V0RXJyb3JFbGVtZW50KGlucHV0KSB7XG4gICAgcmV0dXJuIHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXQubmFtZX0taW5wdXQtZXJyb3JgKTtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dCkge1xuICAgIGNvbnN0IHsgaW5wdXRFcnJvckNsYXNzLCBlcnJvckNsYXNzIH0gPSB0aGlzLl9wYXJhbXM7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZ2V0RXJyb3JFbGVtZW50KGlucHV0KTtcbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKGlucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQoZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXQpIHtcbiAgICBjb25zdCB7IGlucHV0RXJyb3JDbGFzcywgZXJyb3JDbGFzcyB9ID0gdGhpcy5fcGFyYW1zO1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2dldEVycm9yRWxlbWVudChpbnB1dCk7XG4gICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZShpbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCkge1xuICAgIGlmICghaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpO1xuICAgIH1cbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpO1xuICAgICAgICB0aGlzLl90b2dnbGVTdWJtaXRCdXR0b24oKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4gdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpKTtcbiAgICB0aGlzLl90b2dnbGVTdWJtaXRCdXR0b24oKTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZlbnQpID0+IGV2ZW50LnByZXZlbnREZWZhdWx0KCkpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3IpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZlbnQpID0+IHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIF9oYW5kbGVDbG9zZSA9IChldmVudCkgPT4ge1xuICAgIGlmIChcbiAgICAgIGV2ZW50LnRhcmdldCA9PT0gZXZlbnQuY3VycmVudFRhcmdldCB8fFxuICAgICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYnV0dG9uX3R5cGVfY2xvc2UnKVxuICAgICkge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVDbG9zZSk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3RvcihzZWxlY3Rvcikge1xuICAgIHN1cGVyKHNlbGVjdG9yKTtcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLnByZXZpZXdfX2ltYWdlJyk7XG4gICAgdGhpcy5fdGl0bGUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcmV2aWV3X190aXRsZScpO1xuICB9XG5cbiAgb3BlbihjYXJkKSB7XG4gICAgY29uc3QgbmFtZSA9IGNhcmQuZ2V0TmFtZSgpO1xuICAgIHRoaXMuX3RpdGxlLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSBuYW1lO1xuICAgIHRoaXMuX2ltYWdlLnNyYyA9IGNhcmQuZ2V0TGluaygpO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3RvcihzZWxlY3Rvciwgc3VibWl0KSB7XG4gICAgc3VwZXIoc2VsZWN0b3IpO1xuICAgIHRoaXMuX3N1Ym1pdCA9IHN1Ym1pdDtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcbiAgICB0aGlzLl9pbnB1dHMgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXR0b25fdHlwZV9zYXZlJyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uQ2FwdGlvbiA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICAvKiBlc2xpbnQgdW5pY29ybi9wcmVmZXItb2JqZWN0LWZyb20tZW50cmllczogXCJvZmZcIiAqL1xuICAgIHJldHVybiB0aGlzLl9pbnB1dHMucmVkdWNlKChyZXN1bHQsIHsgbmFtZSwgdmFsdWUgfSkgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4ucmVzdWx0LFxuICAgICAgICBbbmFtZV06IHZhbHVlLFxuICAgICAgfTtcbiAgICB9LCB7fSk7XG4gIH1cblxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZykge1xuICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLic7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbkNhcHRpb247XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldmVudCkgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX3N1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgUG9wdXAge1xuICBzZXRBY3Rpb24oZnVuYykge1xuICAgIHRoaXMuX2FjdGlvbiA9IGZ1bmM7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2ZW50KSA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5fYWN0aW9uKCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGRlc2NyaXB0aW9uU2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9pZCA9IG51bGw7XG4gICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9kZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGVzY3JpcHRpb25TZWxlY3Rvcik7XG4gICAgdGhpcy5fYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLl9kZXNjcmlwdGlvbi50ZXh0Q29udGVudCxcbiAgICB9O1xuICB9XG5cbiAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCwgYXZhdGFyLCBfaWQgfSkge1xuICAgIHRoaXMuX2lkID0gX2lkO1xuICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX2Rlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gYWJvdXQ7XG4gICAgdGhpcy5fYXZhdGFyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHthdmF0YXJ9KWA7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoY29udGFpbmVyU2VsZWN0b3IsIHJlbmRlcmVyKSB7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCwgZmlyc3QgPSB0cnVlKSB7XG4gICAgaWYgKGZpcnN0KSB7XG4gICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICByZW5kZXJJdGVtcyhpdGVtcykge1xuICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgY29uc3QgZ2FsbGVyeVNlbGVjdG9yID0gJy5nYWxsZXJ5JztcblxuZXhwb3J0IGNvbnN0IGFkZENhcmRGb3JtID0gZG9jdW1lbnQuZm9ybXMuYWRkQ2FyZDtcbmV4cG9ydCBjb25zdCB1c2VyUHJvZmlsZUZvcm0gPSBkb2N1bWVudC5mb3Jtcy51c2VyUHJvZmlsZTtcbmV4cG9ydCBjb25zdCBhdmF0YXJGb3JtID0gZG9jdW1lbnQuZm9ybXMubG9hZEF2YXRhcjtcbmV4cG9ydCBjb25zdCBuYW1lSW5wdXQgPSB1c2VyUHJvZmlsZUZvcm0ucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF9wcm9wZXJ0eV9uYW1lJyk7XG5leHBvcnQgY29uc3QgZGVzY3JpcHRpb25JbnB1dCA9IHVzZXJQcm9maWxlRm9ybS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3Byb3BlcnR5X2Rlc2NyaXB0aW9uJyk7XG5cbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXR0b25fdHlwZV9lZGl0Jyk7XG5leHBvcnQgY29uc3QgYWRkQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXR0b25fdHlwZV9hZGQnKTtcbmV4cG9ydCBjb25zdCBhdmF0YXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyJyk7XG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0nLFxuICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19pbnB1dCcsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLmJ1dHRvbicsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdidXR0b25fZGlzYWJsZWQnLFxuICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXRfdHlwZV9lcnJvcicsXG4gIGVycm9yQ2xhc3M6ICdwb3B1cF9fZXJyb3JfdmlzaWJsZScsXG59O1xuIiwiZXhwb3J0IGNvbnN0IGVycm9ySGFuZGxlciA9IChlcnJvcikgPT4ge1xuICBjb25zb2xlLmxvZyhlcnJvcik7XG59O1xuIiwiaW1wb3J0ICcuL2luZGV4LmNzcyc7XG5cbmltcG9ydCBBcGkgZnJvbSAnLi4vY29tcG9uZW50cy9BcGkuanMnO1xuaW1wb3J0IENhcmQgZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xuaW1wb3J0IFBvcHVwV2l0aFN1Ym1pdCBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aFN1Ym1pdC5qcyc7XG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xuaW1wb3J0IHtcbiAgZ2FsbGVyeVNlbGVjdG9yLFxuICBhZGRDYXJkRm9ybSxcbiAgdXNlclByb2ZpbGVGb3JtLFxuICBuYW1lSW5wdXQsXG4gIGRlc2NyaXB0aW9uSW5wdXQsXG4gIGVkaXRQcm9maWxlQnV0dG9uLFxuICBhZGRDYXJkQnV0dG9uLFxuICB2YWxpZGF0aW9uQ29uZmlnLFxuICBhdmF0YXJCdXR0b24sXG4gIGF2YXRhckZvcm0sXG59IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgeyBlcnJvckhhbmRsZXIgfSBmcm9tICcuLi91dGlscy9oZWxwZXJzLmpzJztcblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTQxJyxcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246ICc0ZTBhY2ZlOS1kNzFiLTQzNTgtOTFhZi1jOGZkOTYzNDQyZjUnLFxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gIH0sXG59KTtcblxuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoeyBmb3JtU2VsZWN0b3IsIC4uLnBhcmFtcyB9KSA9PiB7XG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGZvcm1TZWxlY3RvcikpO1xuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtKSA9PiB7XG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IocGFyYW1zLCBmb3JtKTtcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm0uZ2V0QXR0cmlidXRlKCduYW1lJyldID0gdmFsaWRhdG9yO1xuICB9KTtcbn07XG5lbmFibGVWYWxpZGF0aW9uKHZhbGlkYXRpb25Db25maWcpO1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVTZWxlY3RvcjogJy5wcm9maWxlX190aXRsZScsXG4gIGRlc2NyaXB0aW9uU2VsZWN0b3I6ICcucHJvZmlsZV9fZGVzY3JpcHRpb24nLFxuICBhdmF0YXJTZWxlY3RvcjogJy5wcm9maWxlX19hdmF0YXInLFxufSk7XG5cbmNvbnN0IHByZXZpZXdQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnLnBvcHVwX3R5cGVfcHJldmlldycpO1xuY29uc3QgY29uZmlybVBvcHVwID0gbmV3IFBvcHVwV2l0aFN1Ym1pdCgnLnBvcHVwX3R5cGVfY29uZmlybScpO1xuXG5jb25zdCBjcmVhdGVDYXJkID0gKGRhdGEpID0+IHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgIHtcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgY3VycmVudFVzZXJJZDogdXNlckluZm8uX2lkLFxuICAgICAgICAuLi5kYXRhLFxuICAgICAgfSxcbiAgICAgIGhhbmRsZUNhcmRDbGljazogKCkgPT4ge1xuICAgICAgICBwcmV2aWV3UG9wdXAub3BlbihjYXJkKTtcbiAgICAgIH0sXG4gICAgICBoYW5kbGVMaWtlQ2xpY2s6IChjYXJkT2JqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IG1ldGhvZCA9IGNhcmRPYmplY3QuaXNMaWtlZCgpXG4gICAgICAgICAgPyBhcGkucmVtb3ZlTGlrZShjYXJkT2JqZWN0LmdldElkKCkpXG4gICAgICAgICAgOiBhcGkubGlrZUNhcmQoY2FyZE9iamVjdC5nZXRJZCgpKTtcbiAgICAgICAgbWV0aG9kXG4gICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgIGNhcmRPYmplY3QudXBkYXRlTGlrZXMoZGF0YSk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goZXJyb3JIYW5kbGVyKTtcbiAgICAgIH0sXG4gICAgICBoYW5kbGVEZWxldGVDbGljazogKGNhcmRPYmplY3QpID0+IHtcbiAgICAgICAgY29uZmlybVBvcHVwLm9wZW4oKTtcbiAgICAgICAgY29uZmlybVBvcHVwLnNldEFjdGlvbigoKSA9PiB7XG4gICAgICAgICAgYXBpXG4gICAgICAgICAgICAuZGVsZXRlQ2FyZChjYXJkT2JqZWN0LmdldElkKCkpXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgIGNhcmRPYmplY3QucmVtb3ZlKCk7XG4gICAgICAgICAgICAgIGNvbmZpcm1Qb3B1cC5jbG9zZSgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChlcnJvckhhbmRsZXIpO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgfSxcbiAgICAnI2dhbGxlcnktaXRlbS10ZW1wbGF0ZSdcbiAgKTtcbiAgcmV0dXJuIGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG59O1xuXG5jb25zdCBjYXJkTGlzdFNlY3Rpb24gPSBuZXcgU2VjdGlvbihnYWxsZXJ5U2VsZWN0b3IsIChpdGVtKSA9PiB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChpdGVtKTtcbiAgY2FyZExpc3RTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQsIGZhbHNlKTtcbn0pO1xuXG5hcGlcbiAgLmdldEluaXRpYWxEYXRhKClcbiAgLnRoZW4oKFt1c2VyRGF0YSwgY2FyZHNdKSA9PiB7XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEpO1xuICAgIGNhcmRMaXN0U2VjdGlvbi5yZW5kZXJJdGVtcyhjYXJkcyk7XG4gIH0pXG4gIC5jYXRjaChlcnJvckhhbmRsZXIpO1xuXG5jb25zdCBjYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX3R5cGVfYWRkLWNhcmQnLCAoaW5wdXRWYWx1ZXMpID0+IHtcbiAgY2FyZFBvcHVwLnJlbmRlckxvYWRpbmcodHJ1ZSk7XG4gIGFwaVxuICAgIC5hZGRDYXJkKGlucHV0VmFsdWVzKVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoZGF0YSk7XG4gICAgICBjYXJkTGlzdFNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7XG4gICAgICBjYXJkUG9wdXAuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaChlcnJvckhhbmRsZXIpXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgY2FyZFBvcHVwLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xuICAgIH0pO1xufSk7XG5jb25zdCBwcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX3R5cGVfZWRpdC1wcm9maWxlJywgKGlucHV0VmFsdWVzKSA9PiB7XG4gIHByb2ZpbGVQb3B1cC5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICBhcGlcbiAgICAudXBkYXRlVXNlckluZm8oaW5wdXRWYWx1ZXMpXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xuICAgICAgcHJvZmlsZVBvcHVwLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goZXJyb3JIYW5kbGVyKVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHByb2ZpbGVQb3B1cC5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcbiAgICB9KTtcbn0pO1xuY29uc3QgYXZhdGFyUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX3R5cGVfYXZhdGFyJywgKGlucHV0VmFsdWVzKSA9PiB7XG4gIGF2YXRhclBvcHVwLnJlbmRlckxvYWRpbmcodHJ1ZSk7XG4gIGFwaVxuICAgIC51cGRhdGVBdmF0YXIoaW5wdXRWYWx1ZXMpXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xuICAgICAgYXZhdGFyUG9wdXAuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaChlcnJvckhhbmRsZXIpXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgYXZhdGFyUG9wdXAucmVuZGVyTG9hZGluZyhmYWxzZSk7XG4gICAgfSk7XG59KTtcbltwcmV2aWV3UG9wdXAsIGNhcmRQb3B1cCwgcHJvZmlsZVBvcHVwLCBjb25maXJtUG9wdXAsIGF2YXRhclBvcHVwXS5mb3JFYWNoKChwb3B1cCkgPT5cbiAgcG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKVxuKTtcblxuY29uc3QgZWRpdFVzZXJJbmZvID0gKCkgPT4ge1xuICBjb25zdCB7IG5hbWUsIGRlc2NyaXB0aW9uIH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBuYW1lSW5wdXQudmFsdWUgPSBuYW1lO1xuICBkZXNjcmlwdGlvbklucHV0LnZhbHVlID0gZGVzY3JpcHRpb247XG4gIGZvcm1WYWxpZGF0b3JzW3VzZXJQcm9maWxlRm9ybS5nZXRBdHRyaWJ1dGUoJ25hbWUnKV0ucmVzZXRWYWxpZGF0aW9uKCk7XG4gIHByb2ZpbGVQb3B1cC5vcGVuKCk7XG59O1xuXG5hdmF0YXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGZvcm1WYWxpZGF0b3JzW2F2YXRhckZvcm0uZ2V0QXR0cmlidXRlKCduYW1lJyldLnJlc2V0VmFsaWRhdGlvbigpO1xuICBhdmF0YXJQb3B1cC5vcGVuKCk7XG59KTtcbmFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGZvcm1WYWxpZGF0b3JzW2FkZENhcmRGb3JtLmdldEF0dHJpYnV0ZSgnbmFtZScpXS5yZXNldFZhbGlkYXRpb24oKTtcbiAgY2FyZFBvcHVwLm9wZW4oKTtcbn0pO1xuZWRpdFByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlZGl0VXNlckluZm8pO1xuIl0sIm5hbWVzIjpbImJhc2VVcmwiLCJoZWFkZXJzIiwidGhpcyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwicGF0aCIsImZldGNoIiwidGhlbiIsIl9wcm9jZXNzUmVzcG9uc2UiLCJfZ2V0IiwiYWxsIiwiX2dldFVzZXJJbmZvIiwiX2dldEluaXRpYWxDYXJkcyIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWJvdXQiLCJjYXJkIiwiY2FyZElkIiwiZGF0YSIsInRlbXBsYXRlU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJoYW5kbGVEZWxldGVDbGljayIsIl9lbGVtZW50IiwicmVtb3ZlIiwiX2NhcmREYXRhIiwiX3RlbXBsYXRlU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZUxpa2VDbGljayIsIl9oYW5kbGVEZWxldGVDbGljayIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfaW1hZ2VFbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9kZWxldGVCdXR0b24iLCJsaW5rIiwiX2lkIiwibGlrZXMiLCJzb21lIiwidXNlciIsImN1cnJlbnRVc2VySWQiLCJfcHJvY2Vzc0xpa2VzIiwiaXNMaWtlZCIsIl9saWtlQnV0dG9uIiwiY2xhc3NMaXN0IiwiYWRkIiwiX2xpa2VDb3VudGVyIiwidGV4dENvbnRlbnQiLCJsZW5ndGgiLCJfZ2V0VGVtcGxhdGUiLCJvd25lciIsIl9zZXRFdmVudExpc3RlbmVycyIsImdldE5hbWUiLCJhbHQiLCJzcmMiLCJnZXRMaW5rIiwiRm9ybVZhbGlkYXRvciIsInBhcmFtcyIsImZvcm0iLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX3BhcmFtcyIsIl9zdWJtaXRCdXR0b24iLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJfZm9ybSIsIl9pbnB1dHMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5wdXQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9kaXNhYmxlU3VibWl0QnV0dG9uIiwiX2VuYWJsZVN1Ym1pdEJ1dHRvbiIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJlcnJvckVsZW1lbnQiLCJfZ2V0RXJyb3JFbGVtZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJmb3JFYWNoIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl90b2dnbGVTdWJtaXRCdXR0b24iLCJldmVudCIsInByZXZlbnREZWZhdWx0Iiwic2VsZWN0b3IiLCJrZXkiLCJjbG9zZSIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJjb250YWlucyIsIl9oYW5kbGVDbG9zZSIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cFdpdGhJbWFnZSIsIl9pbWFnZSIsIl90aXRsZSIsIlBvcHVwIiwiUG9wdXBXaXRoRm9ybSIsInN1Ym1pdCIsIl9zdWJtaXQiLCJfc3VibWl0QnV0dG9uQ2FwdGlvbiIsInJlZHVjZSIsInJlc3VsdCIsInZhbHVlIiwiaXNMb2FkaW5nIiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJmdW5jIiwiX2FjdGlvbiIsIm5hbWVTZWxlY3RvciIsImRlc2NyaXB0aW9uU2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsIl9uYW1lIiwiX2Rlc2NyaXB0aW9uIiwiX2F2YXRhciIsImF2YXRhciIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJlbGVtZW50IiwiZmlyc3QiLCJwcmVwZW5kIiwiYXBwZW5kIiwiaXRlbXMiLCJpdGVtIiwiYWRkQ2FyZEZvcm0iLCJmb3JtcyIsImFkZENhcmQiLCJ1c2VyUHJvZmlsZUZvcm0iLCJ1c2VyUHJvZmlsZSIsImF2YXRhckZvcm0iLCJsb2FkQXZhdGFyIiwibmFtZUlucHV0IiwiZGVzY3JpcHRpb25JbnB1dCIsImVkaXRQcm9maWxlQnV0dG9uIiwiYWRkQ2FyZEJ1dHRvbiIsImF2YXRhckJ1dHRvbiIsImVycm9ySGFuZGxlciIsImVycm9yIiwiY29uc29sZSIsImxvZyIsImZvcm1TZWxlY3RvciIsImFwaSIsIkFwaSIsImF1dGhvcml6YXRpb24iLCJmb3JtVmFsaWRhdG9ycyIsInZhbGlkYXRvciIsImVuYWJsZVZhbGlkYXRpb24iLCJnZXRBdHRyaWJ1dGUiLCJ1c2VySW5mbyIsIlVzZXJJbmZvIiwicHJldmlld1BvcHVwIiwiY29uZmlybVBvcHVwIiwiUG9wdXBXaXRoU3VibWl0IiwiY3JlYXRlQ2FyZCIsIkNhcmQiLCJvcGVuIiwiY2FyZE9iamVjdCIsInJlbW92ZUxpa2UiLCJnZXRJZCIsImxpa2VDYXJkIiwidXBkYXRlTGlrZXMiLCJjYXRjaCIsInNldEFjdGlvbiIsImRlbGV0ZUNhcmQiLCJnZW5lcmF0ZUNhcmQiLCJjYXJkTGlzdFNlY3Rpb24iLCJTZWN0aW9uIiwiY2FyZEVsZW1lbnQiLCJhZGRJdGVtIiwiZ2V0SW5pdGlhbERhdGEiLCJ1c2VyRGF0YSIsImNhcmRzIiwic2V0VXNlckluZm8iLCJyZW5kZXJJdGVtcyIsImNhcmRQb3B1cCIsImlucHV0VmFsdWVzIiwicmVuZGVyTG9hZGluZyIsImZpbmFsbHkiLCJwcm9maWxlUG9wdXAiLCJ1cGRhdGVVc2VySW5mbyIsImF2YXRhclBvcHVwIiwidXBkYXRlQXZhdGFyIiwicG9wdXAiLCJzZXRFdmVudExpc3RlbmVycyIsInJlc2V0VmFsaWRhdGlvbiIsImdldFVzZXJJbmZvIl0sInNvdXJjZVJvb3QiOiIifQ==